<hr color="blue" size=2>

<div class="container">
  <h2>Categoría de Alimentos</h2>

</div>
<!-- INgresar Categorias -->
<div class="container" id="formulario">
  <mat-card class="example-card">

    <!-- Formulario Categorias -->
    <!-- <form #categoryForm="ngForm" class="example-form" (ngSubmit)="addCategory(categoryForm)">

      <div class="progress form-group" *ngIf="categoriaAlimentoService.percentDone">
        <div class="progress-bar progress-bar-striped bg-success" role="progressbar"
          [style.width.%]="categoriaAlimentoService.percentDone">
        </div>
      </div>
      <div class="form-group">
        <div class="preview" *ngIf="preview && preview !== null">
          <img [src]="preview"  class="preview">
        </div>
      </div>

      <div class="form-group">
        <input type="file" (change)="uploadFile($event)">
      </div>
      <mat-form-field class="example-full-width">
        <mat-label>Nombre Categoria</mat-label>
        <input type="text"matInput  name="name" #name="ngModel" [(ngModel)]="categoriaAlimentoService.selectedCategory.name" placeholder="Ingrese Categoria">
      </mat-form-field>
  
      <mat-form-field class="example-full-width">
        <mat-label>Descripcion</mat-label>
        <textarea matInput name="description" #name="ngModel" [(ngModel)]="categoriaAlimentoService.selectedCategory.description" placeholder="Esta categoria de alimentos es..."></textarea>
      </mat-form-field>
    

      <div class="col text-center">
        <button mat-raised-button class="botones" color="primary">Agregar</button>
        <button mat-stroked-button class="botones" (click)="resetForm(categoryForm)" color="warn">Limpiar</button>
      </div>
    </form> -->


    <form [formGroup]="form" #categoryForm="ngForm" (ngSubmit)="submitForm(form, categoryForm)">

      <div class="progress form-group" *ngIf="categoriaAlimentoService.percentDone">
        <div class="progress-bar progress-bar-striped bg-success" role="progressbar"
          [style.width.%]="categoriaAlimentoService.percentDone">
        </div>
      </div>
      <div class="form-group">
        <div class="preview" *ngIf="preview && preview !== null">
          <img [src]="preview"  class="preview">
        </div>
      </div>

      <div class="form-group">
        <input type="file" (change)="uploadFile($event)">
      </div>

      <mat-form-field class="example-full-width">
        <mat-label>Nombre Categoria</mat-label>
        <input type="text"matInput  formControlName="name" placeholder="Ingrese Categoria">
      </mat-form-field>

      <mat-form-field class="example-full-width">
        <mat-label>Descripción</mat-label>
        <input type="text"matInput  formControlName="description" placeholder="Esta categoria de producto es...">
      </mat-form-field>

      <div class="col text-center">
        <button mat-raised-button class="botones" color="primary" [disabled]='!form.valid'>Agregar</button>
      </div>
    </form>
  </mat-card>
</div>

<div class="container">
  <mat-card class="example-card" *ngFor="let category of Categorias; let i = index">
    <div class="float-right">
      <button class="float-right" id="botones" (click)="deleteCategory(category._id)" mat-fab color="warn">
        <mat-icon>delete</mat-icon>
      </button>
      <button class="float-right" id="botones" (click)="ModalEditCategoria(category._id, category.name, category.description, category.img)" mat-fab color="accent">
        <mat-icon>create</mat-icon>
      </button>
      <button class="float-right" id="botones" mat-fab color="primary" [routerLink]="['/registrosubcategoria', category._id]" routerLinkActive="router-link-active"  >
        <mat-icon>addchart</mat-icon>
      </button>
    </div>
    <mat-card-header>
      <div mat-card-avatar>
        <img src="{{category.img}}" class="header-image" [alt]="category.name">
      </div>
      <mat-card-title>{{category.name}}</mat-card-title>
      <!-- <mat-card-subtitle>{{category._id}} </mat-card-subtitle> -->
    </mat-card-header>
    <br>
    <mat-card-content>
      <p>
        {{category.description}}
      </p>
    </mat-card-content>
  </mat-card>
</div> 